---
categories: Python
title: FluentPython - Function As Objects
---

# 头等对象的函数

# 身为头等对象的函数

什么是头等对象？语言学家这么定义：

- 在运行时被创建。
- 被赋予一个变量或者元素在数据结构中。
- 作为函数的参数传递。
- 作为函数的返回值。

整数，字符串，字典什么的都是头等对象。在Python中，所有函数都是头等的。

## 把函数当做对象

请看下面的代码：

```python
>>> def factorial(n):
...
'''returns n!'''
...
return 1 if n < 2 else n * factorial(n-1)
...
>>> factorial(42)
1405006117752879898543142606244511569936384000000000
>>> factorial.__doc__
'returns n!'
>>> type(factorial)
<class 'function'>
```

`__doc__`也是函数对象的属性之一，支持头等对象的函数，给了我们能够以函数式编程的便利。

## 高阶函数

一个以函数为参数或者返回一个函数的函数成为高阶函数。

### map, filter and reduce函数的替代

函数式语言通常提供这三个高阶函数。map和filter函数仍然是内建函数，但是自从递归式列表和生成器表达式出现后，它们便不再重要。

## 匿名函数

除了lambda有时候用用以外，其他时间不怎么用。

## 七种可调用对象

调用运算符()，可以被应用于其他的对象，为了确定一个对象是否是可调用的，使用callable()内建函数，Python数据模型中定义了以下七种可调用对象：

- 用户定义的函数：使用def来定义或者lambda表达式。
- 内建函数：在C中实现的（CPython）。
- 内建的成员方法：像dict.get。
- 成员方法：在类中定义的成员方法。
- 类：使用`__new__`来创建一个新对象，然后使用`__init__`来初始化。
- 类的实例：如果类中定义了`__call__`函数，那么它是可调用的。
- 生成器函数，使用yield关键字的函数和成员方法，

## 用户定义的可调用类型

Python不仅是真正的对象，而且任意Python对象也可以像函数一样运行。实现`__call__`实例方法就足够了。



